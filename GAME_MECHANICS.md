# World Flag Battle - Игровые механики

## Основная механика

### Заполнение территории
- Каждая страна имеет сетку пикселей (от 1000 до 50000)
- Формула расчета пикселей: `sqrt(площадь) / sqrt(население/1000000)`
- Минимум: 1000 пикселей (для микрогосударств)
- Максимум: 50000 пикселей (для крупных стран)

### Система тапов
- **Своя страна**: Размещает пиксель цвета флага
- **Чужая страна**: "Атака" - перекрашивает пиксель в цвет флага атакующего
- **Эффект**: Круговая анимация + вибрация
- **Батчинг**: Отправка на сервер каждые 2 секунды

## Система энергии

### Базовые параметры
- **Старт**: 50 энергии
- **Максимум**: 100 энергии (200 с VIP)
- **Расход**: 1 энергия = 1 пиксель
- **Восстановление**: +1 каждые 3 минуты

### Способы получения
1. **Автовосстановление**: +1 каждые 180 секунд
2. **Ежедневный бонус**: +50 за первый вход в день
3. **Покупка**: Пакеты за Telegram Stars
4. **Достижения**: Бонусы за вехи прогресса

## Прогрессия и цели

### Личный прогресс
- Количество размещенных пикселей
- Вклад в свою страну (%)
- Успешные атаки на другие страны
- Защита территории

### Командные цели
- Заполнить свою страну на 100%
- Попасть в топ-10 лидерборда
- Защитить от атак (% своих пикселей)

### Сезоны и раунды
- **Длительность**: 5-7 дней
- **Награды**: За место в финальном рейтинге
- **Сброс**: Полный сброс карты между сезонами
- **История**: Сохранение статистики прошлых сезонов

## Балансировка

### Факторы балансировки
1. **Размер страны**: Меньше территория = меньше пикселей для заполнения
2. **Население**: Больше потенциальных игроков = больше пикселей
3. **Активность**: Бонусы для стран с меньшим количеством активных игроков
4. **Защита новичков**: Первые 100 пикселей защищены от атак

### Антиспам механики
- Кулдаун между тапами: 100мс
- Максимум тапов в очереди: 10
- Детекция автокликеров
- Временный бан за подозрительную активность

## Социальные механики

### Альянсы (будущее)
- Страны могут формировать альянсы
- Общий чат альянса
- Бонус энергии за помощь союзникам

### События
- **Двойная энергия**: Выходные
- **Блицкриг**: Час без лимита энергии
- **Защита родины**: x2 очки за защиту

## Монетизация

### Telegram Stars покупки

#### Энергия
- 50 энергии = 10 Stars
- 200 энергии = 35 Stars
- 500 энергии = 75 Stars

#### VIP подписка (100 Stars/неделя)
- Максимум энергии: 200
- Восстановление: +1 каждые 1.5 минуты
- Эксклюзивные эффекты тапов
- Значок в лидерборде

#### Бустеры (будущее)
- Мультитап: 3x3 пикселя за тап
- Щит: Защита пикселей на 1 час
- Телепорт: Мгновенный переход к любой стране